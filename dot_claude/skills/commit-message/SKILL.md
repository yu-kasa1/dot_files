---
name: commit-message
description: コミットメッセージを自動生成する。git diff や変更内容からConventional Commits形式のメッセージを提案する。
---

# コミットメッセージ生成

## 実行手順

### 1. 情報収集
以下のコマンドを実行して情報を収集する：

```bash
# 現在のブランチ名を取得
git branch --show-current

# ステージング状態を確認
git status

# ステージされた変更内容を取得（ステージがなければ全体のdiff）
git diff --cached
# または
git diff
```

### 2. コミットメッセージの生成

収集した情報をもとに、以下の形式でコミットメッセージを生成する：

```
<type>(<scope>): [<branch>] <subject>

<body>
```

#### 形式ルール

| 要素 | 言語 | 説明 |
|------|------|------|
| type | 英語 | 変更の種類（必須） |
| scope | 英語 | 影響範囲（任意） |
| branch | 英語 | 現在のブランチ名 |
| subject | 日本語 | 変更内容の簡潔な説明（必須、50文字以内目安） |
| body | 日本語 | 詳細説明（任意、常体で記述） |

#### type一覧

| type | 用途 |
|------|------|
| feat | 新機能 |
| fix | バグ修正 |
| docs | ドキュメントのみの変更 |
| style | コードの意味に影響しない変更（空白、フォーマット等） |
| refactor | バグ修正でも新機能でもないコード変更 |
| perf | パフォーマンス改善 |
| test | テストの追加・修正 |
| chore | ビルドプロセスやツールの変更 |

#### scope例
- auth, api, ui, db, config, build など

### 3. 出力形式

以下の形式で提案を出力する：

```markdown
## 提案するコミットメッセージ

<type>(<scope>): [<branch>] <subject>

- <変更点1>
- <変更点2>
- <変更点3>
```

## 注意事項

- ステージされた変更がない場合は `git diff` で未ステージの変更を確認する
- 変更が何もない場合は、その旨を通知する
- コミットメッセージの提案のみを行い、**コミットの実行はユーザーに任せる**
- bodyが不要な場合（変更内容が自明な場合）は省略可能
